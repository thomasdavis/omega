# Railway.toml - Multi-service configuration for monorepo
# Both services build from repo root to access workspace packages

# Service 1: Discord Bot (Gateway API)
[service.omega-bot]
root = "."  # Build from repo root for workspace access
dockerfile = "apps/bot/Dockerfile"
buildCommand = "echo 'Building omega-bot...'"
startCommand = "node dist/index.js"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[[service.omega-bot.mounts]]
mountPath = "/data"

# Service 2: Next.js Web App
[service.omega-web]
root = "."  # Build from repo root for workspace access
dockerfile = "apps/web/Dockerfile"
buildCommand = "echo 'Building omega-web...'"
startCommand = "pnpm start"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[[service.omega-web.mounts]]
mountPath = "/data"

[service.omega-web.healthcheck]
path = "/"
timeout = 300
